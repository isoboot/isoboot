# Default values for isoboot.

image:
  repository: ghcr.io/isoboot/isoboot
  # Overrides the image tag whose default is the chart appVersion
  tag: ""
  pullPolicy: IfNotPresent

# Number of controller replicas.
# For HA, set replicaCount > 1 and enable controller.leaderElection.
# NOTE: When using hostPath storage, data is node-local and not shared across replicas.
replicaCount: 1

controller:
  # Base directory for storing downloaded boot resources
  baseDir: /var/lib/isoboot
  # Leader election configuration
  # NOTE: This chart does NOT install any RBAC resources.
  # Leader election requires RBAC permissions on Leases/ConfigMaps/Events,
  # typically provided by the manifests under config/rbac/* or equivalent.
  # Do not enable leaderElection unless the required RBAC has been installed
  # out-of-band; otherwise, the controller will fail to start.
  # RBAC management is deferred to issue #176.
  leaderElection:
    enabled: false
  resources:
    limits:
      memory: 512Mi
      cpu: 500m
    requests:
      memory: 256Mi
      cpu: 250m

# Storage configuration for boot files (hostPath only in this release)
# NOTE: For persistent storage options (PVC), see issue #176.
storage:
  hostPath:
    # Host path for storage (defaults to controller.baseDir if empty)
    path: ""
    # Type of hostPath volume.
    # Default: Directory (fails if path doesn't exist, requires pre-creation with correct ownership)
    # IMPORTANT: The directory must be writable by UID/GID 65532. Pre-create it with:
    #   sudo mkdir -p /var/lib/isoboot && sudo chown 65532:65532 /var/lib/isoboot
    # Or use DirectoryOrCreate with an initContainer (see #176).
    type: Directory

serviceAccount:
  # Specifies whether a service account should be created
  create: true
  # Annotations to add to the service account
  annotations: {}
  # The name of the service account to use
  # If not set and create is true, a name is generated using the fullname template
  name: ""

# Pod annotations
podAnnotations: {}

# Pod security context
podSecurityContext:
  runAsNonRoot: true
  # fsGroup sets the group ownership for mounted volumes (effective for PVC/emptyDir).
  # NOTE: For hostPath volumes, fsGroup does NOT change permissions - the host directory
  # must already be writable by UID/GID 65532 (pre-create with chown, or use PVC in #176).
  fsGroup: 65532
  seccompProfile:
    type: RuntimeDefault

# Container security context
securityContext:
  allowPrivilegeEscalation: false
  capabilities:
    drop:
      - ALL
  readOnlyRootFilesystem: true
  runAsNonRoot: true
  runAsUser: 65532
  runAsGroup: 65532

# Node selector for pod scheduling
nodeSelector: {}

# Tolerations for pod scheduling
tolerations: []

# Affinity rules for pod scheduling
affinity: {}
